import t from"bull";function r(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,o(t,r)}function o(t,r){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},o(t,r)}var e,n=/*#__PURE__*/function(){function r(t){this.dbUrl=void 0,this.dbPort=void 0,this.dbPassword="",this.dbUrl=t.dbUrl,this.dbPort=t.dbPort,t.password&&(this.dbPassword=t.password)}return r.prototype.initializeQueue=function(r){return new t(r,{redis:{port:this.dbPort,host:this.dbUrl,password:this.dbPassword}})},r}(),s=/*#__PURE__*/function(o){function e(){return o.apply(this,arguments)||this}r(e,o);var n=e.prototype;return n.createQueue=function(r){return new t(r,{redis:{port:this.dbPort,host:this.dbUrl,password:this.dbPassword}})},n.addTaskToQueue=function(t,r,o,e){t.add(r,e),t.process(function(t){try{return Promise.resolve(function(r,e){try{var n=Promise.resolve(o(t.data))}catch(t){return e()}return n&&n.then?n.then(void 0,e):n}(0,function(){return Promise.reject(new Error("Some error happened"))}))}catch(t){return Promise.reject(t)}}),console.log("task done")},e}(n),i=/*#__PURE__*/function(t){function o(){return t.apply(this,arguments)||this}return r(o,t),o}(n);e=i,[s].forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(r){Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})});export{i as default};
